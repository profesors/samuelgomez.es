== Makefile

Este es un ejemplo de un Makefile

[source,makefile]
--
FC = gfortran
SRC = $(wildcard *.f90)
TARGET = $(addprefix app/,$(SRC:.f90=))
ARGS =-ffree-form -fimplicit-none -fcheck -fbacktrace
OPEN_BLAS=-L/opt/OpenBLAS/lib

all: $(TARGET)

# Caso genérico
app/%: %.f90 
	$(FC) $(ARGS) -o $@ $<

clean:
	@rm -f $(TARGET)
	@rm -f *.mod *.o

--


Este otro lo he usado más y me da buenos resultados

[source,makefile]
--
FC = gfortran
CAF = caf
SRC = $(wildcard src/*.f)
FILES_NO_EXT = $(notdir $(SRC))
TARGETS = $(addprefix app/,$(FILES_NO_EXT:.f=))

# Modules
MOD_SRC = $(wildcard src/mod/*.f)
MOD_TARGETS = $(addprefix app/mod/,$(notdir $(MOD_SRC:.f=.mod)))

# Arguments
#ARGS = -Wall -Wextra -std=f2018 -O3 -pedantic -fdec-math -ffree-form -Imod
ARGS = -std=f2018 -ffree-form -Imod


all: app mod $(TARGETS)

# Make target directory
app mod:
	@mkdir -p app
	@mkdir -p mod

# Caso genérico
app/%: src/%.f 
	$(FC) $(ARGS) $< -o $@

clean:
	@rm -f $(TARGETS)
	@rm -f mod/*.mod mod/*.o
--
